# 7 æŠ½è±¡æ“ä½œ

è¿™äº›æ“ä½œä¸æ˜¯ ECMAScript è¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼›å®ƒä»¬åœ¨æ­¤å®šä¹‰ä»…ç”¨äºå¸®åŠ©æŒ‡å®š ECMAScript è¯­è¨€çš„è¯­ä¹‰ã€‚å…¶ä»–æ›´ä¸“ä¸šçš„æŠ½è±¡æ“ä½œåœ¨æ•´ä¸ªè§„èŒƒä¸­æœ‰å®šä¹‰ã€‚

## 7.1 ç±»å‹è½¬æ¢

ECMAScript è¯­è¨€æ ¹æ®éœ€è¦éšå¼åœ°æ‰§è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚ä¸ºäº†æ¾„æ¸…æŸäº›æ„é€ çš„è¯­ä¹‰ï¼Œå®šä¹‰äº†ä¸€ç»„è½¬æ¢æŠ½è±¡æ“ä½œã€‚è¿™äº›è½¬æ¢æŠ½è±¡æ“ä½œæ˜¯å¤šæ€çš„ï¼›å®ƒä»¬å¯ä»¥æ¥å—ä»»ä½• ECMAScript è¯­è¨€ç±»å‹çš„å€¼ã€‚ä½†è¿™äº›æ“ä½œä¸ä½¿ç”¨å…¶ä»–è§„èŒƒç±»å‹ã€‚

BigInt ç±»å‹åœ¨ ECMAScript è¯­è¨€ä¸­æ²¡æœ‰éšå¼è½¬æ¢ï¼›ç¨‹åºå‘˜å¿…é¡»æ˜¾å¼è°ƒç”¨ BigInt æ¥ä»å…¶ä»–ç±»å‹è½¬æ¢å€¼ã€‚

### 7.1.1 ToPrimitive ( input [ , preferredType ] )

æŠ½è±¡æ“ä½œ ToPrimitive æ¥å—å‚æ•° inputï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œå¯é€‰å‚æ•° preferredTypeï¼ˆSTRING æˆ– NUMBERï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–ä¸€ä¸ªæŠ›å‡ºå®Œæˆã€‚å®ƒå°†å…¶è¾“å…¥å‚æ•°è½¬æ¢ä¸ºéå¯¹è±¡ç±»å‹ã€‚å¦‚æœå¯¹è±¡èƒ½å¤Ÿè½¬æ¢ä¸ºå¤šç§åŸå§‹ç±»å‹ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å¯é€‰çš„æç¤º preferredType æ¥åå¥½è¯¥ç±»å‹ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ input æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™
   1. ä»¤ exoticToPrim ä¸º ? GetMethod(input, @@toPrimitive)ã€‚
   2. å¦‚æœ exoticToPrim ä¸ä¸º undefinedï¼Œåˆ™
      1. å¦‚æœæœªæä¾› preferredTypeï¼Œåˆ™
         1. ä»¤ hint ä¸º "default"ã€‚
      2. å¦åˆ™å¦‚æœ preferredType ä¸º STRINGï¼Œåˆ™
         1. ä»¤ hint ä¸º "string"ã€‚
      3. å¦åˆ™ï¼Œ
         1. æ–­è¨€ï¼špreferredType ä¸º NUMBERã€‚
         2. ä»¤ hint ä¸º "number"ã€‚
      4. ä»¤ result ä¸º ? Call(exoticToPrim, input, Â« hint Â»)ã€‚
      5. å¦‚æœ result ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿”å› resultã€‚
      6. æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
   3. å¦‚æœæœªæä¾› preferredTypeï¼Œä»¤ preferredType ä¸º NUMBERã€‚
   4. è¿”å› ? OrdinaryToPrimitive(input, preferredType)ã€‚
2. è¿”å› inputã€‚

**æ³¨æ„**
å½“ ToPrimitive åœ¨æ²¡æœ‰æç¤ºçš„æƒ…å†µä¸‹è°ƒç”¨æ—¶ï¼Œå®ƒé€šå¸¸è¡¨ç°å¾—å¥½åƒæç¤ºæ˜¯ NUMBERã€‚ç„¶è€Œï¼Œå¯¹è±¡å¯ä»¥é€šè¿‡å®šä¹‰ @@toPrimitive æ–¹æ³•æ¥é‡å†™æ­¤è¡Œä¸ºã€‚åœ¨æœ¬è§„èŒƒä¸­å®šä¹‰çš„å¯¹è±¡ä¸­ï¼Œåªæœ‰ Dateï¼ˆå‚è§ 21.4.4.45ï¼‰å’Œ Symbol å¯¹è±¡ï¼ˆå‚è§ 20.4.3.5ï¼‰é‡å†™äº†é»˜è®¤çš„ ToPrimitive è¡Œä¸ºã€‚Dates åœ¨æç¤ºç¼ºå¤±æ—¶å°†å…¶è§†ä¸º STRINGã€‚

### 7.1.1.1 OrdinaryToPrimitive ( O, hint )

æŠ½è±¡æ“ä½œ OrdinaryToPrimitive æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ hintï¼ˆSTRING æˆ– NUMBERï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–ä¸€ä¸ªæŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ hint æ˜¯ STRINGï¼Œåˆ™
   1. ä»¤ methodNames ä¸º Â« "toString", "valueOf" Â»ã€‚
2. å¦åˆ™ï¼Œ
   1. ä»¤ methodNames ä¸º Â« "valueOf", "toString" Â»ã€‚
3. å¯¹äº methodNames çš„æ¯ä¸ªå…ƒç´  nameï¼Œæ‰§è¡Œ
   1. ä»¤ method ä¸º ? Get(O, name)ã€‚
   2. å¦‚æœ IsCallable(method) ä¸º trueï¼Œåˆ™
      1. ä»¤ result ä¸º ? Call(method, O)ã€‚
      2. å¦‚æœ result ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿”å› resultã€‚
4. æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚

### 7.1.2 ToBoolean ( argument )

æŠ½è±¡æ“ä½œ ToBoolean æ¥å—å‚æ•° argumentï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å®ƒå°† argument è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹çš„å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argument æ˜¯å¸ƒå°”å€¼ï¼Œè¿”å› argumentã€‚
2. å¦‚æœ argument æ˜¯ undefinedã€nullã€+0ğ”½ã€-0ğ”½ã€NaNã€0â„¤ æˆ–ç©ºå­—ç¬¦ä¸²ä¹‹ä¸€ï¼Œè¿”å› falseã€‚
3. **æ³¨æ„**ï¼šæ­¤æ­¥éª¤åœ¨ç¬¬ B.3.6.1 èŠ‚ä¸­è¢«æ›¿æ¢ã€‚
4. è¿”å› trueã€‚

### 7.1.3 ToNumeric ( value )

æŠ½è±¡æ“ä½œ ToNumeric æ¥å—å‚æ•° valueï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›ä¸€ä¸ªåŒ…å« Number æˆ– BigInt çš„æ­£å¸¸å®Œæˆï¼Œæˆ–ä¸€ä¸ªæŠ›å‡ºå®Œæˆã€‚å®ƒè¿”å›è½¬æ¢ä¸º Number æˆ– BigInt çš„ valueã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ primValue ä¸º ? ToPrimitive(value, NUMBER)ã€‚
2. å¦‚æœ primValue æ˜¯ BigIntï¼Œè¿”å› primValueã€‚
3. è¿”å› ? ToNumber(primValue)ã€‚

### 7.1.4 ToNumber ( argument )

æŠ½è±¡æ“ä½œ ToNumber æ¥å—å‚æ•° argumentï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›ä¸€ä¸ªåŒ…å« Number çš„æ­£å¸¸å®Œæˆæˆ–ä¸€ä¸ªæŠ›å‡ºå®Œæˆã€‚å®ƒå°† argument è½¬æ¢ä¸º Number ç±»å‹çš„å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argument æ˜¯ Numberï¼Œè¿”å› argumentã€‚
2. å¦‚æœ argument æ˜¯ Symbol æˆ– BigIntï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. å¦‚æœ argument æ˜¯ undefinedï¼Œè¿”å› NaNã€‚
4. å¦‚æœ argument æ˜¯ null æˆ– falseï¼Œè¿”å› +0ğ”½ã€‚
5. å¦‚æœ argument æ˜¯ trueï¼Œè¿”å› 1ğ”½ã€‚
6. å¦‚æœ argument æ˜¯å­—ç¬¦ä¸²ï¼Œè¿”å› StringToNumber(argument)ã€‚
7. æ–­è¨€ï¼šargument æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚
8. ä»¤ primValue ä¸º ? ToPrimitive(argument, NUMBER)ã€‚
9. æ–­è¨€ï¼šprimValue ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚
10. è¿”å› ? ToNumber(primValue)ã€‚

### 7.1.4.1 ToNumber åº”ç”¨äºå­—ç¬¦ä¸²ç±»å‹

æŠ½è±¡æ“ä½œ StringToNumber æŒ‡å®šå¦‚ä½•å°†å­—ç¬¦ä¸²å€¼è½¬æ¢ä¸º Number å€¼ï¼Œä½¿ç”¨ä»¥ä¸‹è¯­æ³•ã€‚

#### è¯­æ³•

```plaintext
StringNumericLiteral :::
StrWhiteSpaceopt
StrWhiteSpaceopt StrNumericLiteral StrWhiteSpaceopt
StrWhiteSpace :::
StrWhiteSpaceChar StrWhiteSpaceopt
StrWhiteSpaceChar :::
WhiteSpace
LineTerminator
StrNumericLiteral :::
StrDecimalLiteral
NonDecimalIntegerLiteral[~Sep]
StrDecimalLiteral :::
StrUnsignedDecimalLiteral
+ StrUnsignedDecimalLiteral
- StrUnsignedDecimalLiteral
StrUnsignedDecimalLiteral :::
Infinity
DecimalDigits[~Sep] . DecimalDigits[~Sep]opt ExponentPart[~Sep]opt
. DecimalDigits[~Sep] ExponentPart[~Sep]opt
DecimalDigits[~Sep] ExponentPart[~Sep]opt
```

æ‰€æœ‰æœªæ˜ç¡®å®šä¹‰çš„è¯­æ³•ç¬¦å·åœ¨æ•°å€¼å­—é¢é‡çš„è¯æ³•è¯­æ³•ï¼ˆ12.9.3ï¼‰ä¸­æœ‰å®šä¹‰ã€‚

**æ³¨æ„**
StringNumericLiteral çš„è¯­æ³•ä¸ NumericLiteral çš„è¯­æ³•ä¹‹é—´æœ‰ä¸€äº›å·®å¼‚ï¼š

1. StringNumericLiteral å¯èƒ½åŒ…å«å‰å¯¼å’Œ/æˆ–å°¾éšçš„ç©ºç™½å­—ç¬¦å’Œ/æˆ–è¡Œç»ˆæ­¢ç¬¦ã€‚
2. ä½œä¸ºåè¿›åˆ¶çš„ StringNumericLiteral å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å‰å¯¼ 0 æ•°å­—ã€‚
3. ä½œä¸ºåè¿›åˆ¶çš„ StringNumericLiteral å¯ä»¥åŒ…å« + æˆ– - æ¥è¡¨ç¤ºå…¶ç¬¦å·ã€‚
4. ç©ºå­—ç¬¦ä¸²æˆ–ä»…åŒ…å«ç©ºç™½å­—ç¬¦çš„ StringNumericLiteral è½¬æ¢ä¸º +0ğ”½ã€‚
5. Infinity å’Œ -Infinity è¢«è¯†åˆ«ä¸º StringNumericLiteralï¼Œä½†ä¸æ˜¯ NumericLiteralã€‚
6. StringNumericLiteral ä¸èƒ½åŒ…å« BigIntLiteralSuffixã€‚
7. StringNumericLiteral ä¸èƒ½åŒ…å« NumericLiteralSeparatorã€‚

#### 7.1.4.1.1 StringToNumber ( str )

æŠ½è±¡æ“ä½œ StringToNumber æ¥å—å‚æ•° strï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰å¹¶è¿”å›ä¸€ä¸ª Numberã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ literal ä¸º ParseText(str, StringNumericLiteral)ã€‚
2. å¦‚æœ literal æ˜¯ä¸€ä¸ªé”™è¯¯åˆ—è¡¨ï¼Œè¿”å› NaNã€‚
3. è¿”å› literal çš„ StringNumericValueã€‚

7.1.4.1.2 è¿è¡Œæ—¶è¯­ä¹‰ï¼šStringNumericValue

è¯­æ³•å®šå‘æ“ä½œ StringNumericValue ä¸æ¥å—å‚æ•°å¹¶è¿”å›ä¸€ä¸ª Numberã€‚

**æ³¨æ„**
StringNumericLiteral è½¬æ¢ä¸º Number å€¼çš„è¿‡ç¨‹æ€»ä½“ä¸Šç±»ä¼¼äºç¡®å®š NumericLiteral çš„ NumericValueï¼ˆå‚è§ 12.9.3ï¼‰ï¼Œä½†æŸäº›ç»†èŠ‚æœ‰æ‰€ä¸åŒã€‚

å®ƒåˆ†æ®µå®šä¹‰åœ¨ä»¥ä¸‹ç”Ÿæˆå¼ä¸Šï¼š

StringNumericLiteral ::: StrWhiteSpaceopt
1. è¿”å› +0ğ”½ã€‚
StringNumericLiteral ::: StrWhiteSpaceopt StrNumericLiteral StrWhiteSpaceopt
1. è¿”å› StrNumericLiteral çš„ StringNumericValueã€‚
StrNumericLiteral ::: NonDecimalIntegerLiteral
1. è¿”å› ğ”½(MV of NonDecimalIntegerLiteral)ã€‚
StrDecimalLiteral ::: - StrUnsignedDecimalLiteral
1. ä»¤ a ä¸º StrUnsignedDecimalLiteral çš„ StringNumericValueã€‚
2. å¦‚æœ a æ˜¯ +0ğ”½ï¼Œè¿”å› -0ğ”½ã€‚
3. è¿”å› -aã€‚
StrUnsignedDecimalLiteral ::: Infinity
1. è¿”å› +âˆğ”½ã€‚
StrUnsignedDecimalLiteral ::: DecimalDigits . DecimalDigitsopt ExponentPartopt
1. ä»¤ a ä¸ºç¬¬ä¸€ä¸ª DecimalDigits çš„ MVã€‚
2. å¦‚æœç¬¬äºŒä¸ª DecimalDigits å­˜åœ¨ï¼Œåˆ™
   1. ä»¤ b ä¸ºç¬¬äºŒä¸ª DecimalDigits çš„ MVã€‚
   2. ä»¤ n ä¸ºç¬¬äºŒä¸ª DecimalDigits ä¸­ä»£ç ç‚¹çš„æ•°é‡ã€‚
3. å¦åˆ™ï¼Œ
   1. ä»¤ b ä¸º 0ã€‚
   2. ä»¤ n ä¸º 0ã€‚
4. å¦‚æœ ExponentPart å­˜åœ¨ï¼Œåˆ™ä»¤ e ä¸º ExponentPart çš„ MVã€‚å¦åˆ™ï¼Œä»¤ e ä¸º 0ã€‚
5. è¿”å› RoundMVResult((a + (b Ã— 10**-n)) Ã— 10**e)ã€‚
StrUnsignedDecimalLiteral ::: . DecimalDigits ExponentPartopt
1. ä»¤ b ä¸º DecimalDigits çš„ MVã€‚
2. å¦‚æœ ExponentPart å­˜åœ¨ï¼Œåˆ™ä»¤ e ä¸º ExponentPart çš„ MVã€‚å¦åˆ™ï¼Œä»¤ e ä¸º 0ã€‚
3. ä»¤ n ä¸º DecimalDigits ä¸­ä»£ç ç‚¹çš„æ•°é‡ã€‚
4. è¿”å› RoundMVResult(b Ã— 10**(e - n))ã€‚
StrUnsignedDecimalLiteral ::: DecimalDigits ExponentPartopt
1. ä»¤ a ä¸º DecimalDigits çš„ MVã€‚
2. å¦‚æœ ExponentPart å­˜åœ¨ï¼Œåˆ™ä»¤ e ä¸º ExponentPart çš„ MVã€‚å¦åˆ™ï¼Œä»¤ e ä¸º 0ã€‚
3. è¿”å› RoundMVResult(a Ã— 10**e)ã€‚

### 7.1.4.1.3 RoundMVResult ( n )

æŠ½è±¡æ“ä½œ RoundMVResult æ¥å—å‚æ•° nï¼ˆä¸€ä¸ªæ•°å­¦å€¼ï¼‰å¹¶è¿”å›ä¸€ä¸ª Numberã€‚å®ƒä»¥å®ç°å®šä¹‰çš„æ–¹å¼å°† n è½¬æ¢ä¸ºä¸€ä¸ª Numberã€‚å¯¹äºæ­¤æŠ½è±¡æ“ä½œï¼Œå¦‚æœä¸€ä¸ªæ•°å­—åœ¨å…¶å·¦ä¾§å’Œå³ä¾§éƒ½æœ‰éé›¶æ•°å­—ï¼Œåˆ™è¯¥æ•°å­—æ˜¯æœ‰æ•ˆæ•°å­—ã€‚å¯¹äºæ­¤æŠ½è±¡æ“ä½œï¼Œâ€œæ•°å­¦å€¼è¡¨ç¤ºâ€çš„æ•°å­¦å€¼æ˜¯â€œåè¿›åˆ¶è¡¨ç¤ºâ€çš„æ•°å­¦å€¼çš„é€†ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ n çš„åè¿›åˆ¶è¡¨ç¤ºæœ‰ 20 ä¸ªæˆ–æ›´å°‘çš„æœ‰æ•ˆæ•°å­—ï¼Œè¿”å› ğ”½(n)ã€‚
2. ä»¤ option1 ä¸ºç”¨ 0 æ›¿æ¢ n çš„åè¿›åˆ¶è¡¨ç¤ºä¸­ç¬¬ 20 ä½åçš„æ¯ä¸ªæœ‰æ•ˆæ•°å­—æ‰€å¾—çš„æ•°å­¦å€¼ã€‚
3. ä»¤ option2 ä¸ºç”¨ 0 æ›¿æ¢ n çš„åè¿›åˆ¶è¡¨ç¤ºä¸­ç¬¬ 20 ä½åçš„æ¯ä¸ªæœ‰æ•ˆæ•°å­—åï¼Œåœ¨ç¬¬ 20 ä½ä¸ŠåŠ  1ï¼ˆå¿…è¦æ—¶è¿›ä½ï¼‰æ‰€å¾—çš„æ•°å­¦å€¼ã€‚
4. ä»¤ chosen ä¸ºå®ç°å®šä¹‰çš„é€‰æ‹© option1 æˆ– option2ã€‚
5. è¿”å› ğ”½(chosen)ã€‚
### 7.2 æµ‹è¯•å’Œæ¯”è¾ƒæ“ä½œ

#### 7.2.1 RequireObjectCoercible ( argument )
æŠ½è±¡æ“ä½œ RequireObjectCoercible æ¥å—å‚æ•° argumentï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å¦‚æœ argument æ˜¯æ— æ³•ä½¿ç”¨ ToObject è½¬æ¢ä¸ºå¯¹è±¡çš„å€¼ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚å®ƒç”±è¡¨14å®šä¹‰ï¼š

**è¡¨14ï¼šRequireObjectCoercible ç»“æœ**
| å‚æ•°ç±»å‹ | ç»“æœ |
| --- | --- |
| Undefined | æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚ |
| Null | æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚ |
| Boolean | è¿”å› argumentã€‚ |
| Number | è¿”å› argumentã€‚ |
| String | è¿”å› argumentã€‚ |
| Symbol | è¿”å› argumentã€‚ |
| BigInt | è¿”å› argumentã€‚ |
| Object | è¿”å› argumentã€‚ |

#### 7.2.2 IsArray ( argument )
æŠ½è±¡æ“ä½œ IsArray æ¥å—å‚æ•° argumentï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argument ä¸æ˜¯å¯¹è±¡ï¼Œè¿”å› falseã€‚
2. å¦‚æœ argument æ˜¯ä¸€ä¸ªæ•°ç»„ç‰¹æ®Šå¯¹è±¡ï¼Œè¿”å› trueã€‚
3. å¦‚æœ argument æ˜¯ä¸€ä¸ªä»£ç†ç‰¹æ®Šå¯¹è±¡ï¼Œåˆ™
   1. æ‰§è¡Œ ? ValidateNonRevokedProxy(argument)ã€‚
   2. ä»¤ proxyTarget ä¸º argument.[[ProxyTarget]]ã€‚
   3. è¿”å› ? IsArray(proxyTarget)ã€‚
4. è¿”å› falseã€‚

#### 7.2.3 IsCallable ( argument )
æŠ½è±¡æ“ä½œ IsCallable æ¥å—å‚æ•° argumentï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚å®ƒç¡®å®š argument æ˜¯å¦ä¸ºå…·æœ‰ [[Call]] å†…éƒ¨æ–¹æ³•çš„å¯è°ƒç”¨å‡½æ•°ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argument ä¸æ˜¯å¯¹è±¡ï¼Œè¿”å› falseã€‚
2. å¦‚æœ argument å…·æœ‰ [[Call]] å†…éƒ¨æ–¹æ³•ï¼Œè¿”å› trueã€‚
3. è¿”å› falseã€‚

#### 7.2.4 IsConstructor ( argument )
æŠ½è±¡æ“ä½œ IsConstructor æ¥å—å‚æ•° argumentï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚å®ƒç¡®å®š argument æ˜¯å¦ä¸ºå…·æœ‰ [[Construct]] å†…éƒ¨æ–¹æ³•çš„å‡½æ•°å¯¹è±¡ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argument ä¸æ˜¯å¯¹è±¡ï¼Œè¿”å› falseã€‚
2. å¦‚æœ argument å…·æœ‰ [[Construct]] å†…éƒ¨æ–¹æ³•ï¼Œè¿”å› trueã€‚
3. è¿”å› falseã€‚

#### 7.2.5 IsExtensible ( O )
æŠ½è±¡æ“ä½œ IsExtensible æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºç¡®å®šæ˜¯å¦å¯ä»¥å‘ O æ·»åŠ é¢å¤–çš„å±æ€§ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. è¿”å› ? O.[[IsExtensible]]()ã€‚

#### 7.2.6 IsRegExp ( argument )
æŠ½è±¡æ“ä½œ IsRegExp æ¥å—å‚æ•° argumentï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argument ä¸æ˜¯å¯¹è±¡ï¼Œè¿”å› falseã€‚
2. ä»¤ matcher ä¸º ? Get(argument, @@match)ã€‚
3. å¦‚æœ matcher ä¸æ˜¯ undefinedï¼Œè¿”å› ToBoolean(matcher)ã€‚
4. å¦‚æœ argument å…·æœ‰ [[RegExpMatcher]] å†…éƒ¨æ§½ï¼Œè¿”å› trueã€‚
5. è¿”å› falseã€‚

#### 7.2.7 é™æ€è¯­ä¹‰ï¼šIsStringWellFormedUnicode ( string )
æŠ½è±¡æ“ä½œ IsStringWellFormedUnicode æ¥å—å‚æ•° stringï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚å®ƒå°†å­—ç¬¦ä¸²è§£é‡Šä¸º UTF-16 ç¼–ç çš„ä»£ç ç‚¹åºåˆ—ï¼Œå¦‚ 6.1.4 ä¸­æè¿°ï¼Œå¹¶ç¡®å®šå…¶æ˜¯å¦ä¸ºæ ¼å¼è‰¯å¥½çš„ UTF-16 åºåˆ—ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ len ä¸º string çš„é•¿åº¦ã€‚
2. ä»¤ k ä¸º 0ã€‚
3. é‡å¤ï¼Œç›´åˆ° k < len,
   1. ä»¤ cp ä¸º CodePointAt(string, k)ã€‚
   2. å¦‚æœ cp.[[IsUnpairedSurrogate]] ä¸º trueï¼Œè¿”å› falseã€‚
   3. å°† k è®¾ä¸º k + cp.[[CodeUnitCount]]ã€‚
4. è¿”å› trueã€‚

#### 7.2.8 SameValue ( x, y )
æŠ½è±¡æ“ä½œ SameValue æ¥å—å‚æ•° xï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ yï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚å®ƒç¡®å®šä¸¤ä¸ªå‚æ•°æ˜¯å¦ä¸ºç›¸åŒçš„å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ Type(x) ä¸æ˜¯ Type(y)ï¼Œè¿”å› falseã€‚
2. å¦‚æœ x æ˜¯ Numberï¼Œåˆ™
   1. è¿”å› Number::sameValue(x, y)ã€‚
3. è¿”å› SameValueNonNumber(x, y)ã€‚

**æ³¨æ„**ï¼š
æ­¤ç®—æ³•ä¸åŒäº IsStrictlyEqual ç®—æ³•ï¼Œå› ä¸ºå®ƒå°†æ‰€æœ‰ NaN å€¼è§†ä¸ºç­‰ä»·ï¼Œå¹¶åŒºåˆ† +0ğ”½ å’Œ -0ğ”½ã€‚

#### 7.2.9 SameValueZero ( x, y )
æŠ½è±¡æ“ä½œ SameValueZero æ¥å—å‚æ•° xï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ yï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚å®ƒç¡®å®šä¸¤ä¸ªå‚æ•°æ˜¯å¦ä¸ºç›¸åŒçš„å€¼ï¼ˆå¿½ç•¥ +0ğ”½ å’Œ -0ğ”½ çš„å·®å¼‚ï¼‰ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ Type(x) ä¸æ˜¯ Type(y)ï¼Œè¿”å› falseã€‚
2. å¦‚æœ x æ˜¯ Numberï¼Œåˆ™
   1. è¿”å› Number::sameValueZero(x, y)ã€‚
3. è¿”å› SameValueNonNumber(x, y)ã€‚

**æ³¨æ„**ï¼š
SameValueZero ä¸ SameValue çš„åŒºåˆ«åœ¨äºå®ƒå°† +0ğ”½ å’Œ -0ğ”½ è§†ä¸ºç­‰ä»·ã€‚

#### 7.2.10 SameValueNonNumber ( x, y )
æŠ½è±¡æ“ä½œ SameValueNonNumber æ¥å—å‚æ•° xï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼Œä½†ä¸æ˜¯ Numberï¼‰å’Œ yï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼Œä½†ä¸æ˜¯ Numberï¼‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ–­è¨€ï¼šType(x) æ˜¯ Type(y)ã€‚
2. å¦‚æœ x æ˜¯ null æˆ– undefinedï¼Œè¿”å› trueã€‚
3. å¦‚æœ x æ˜¯ BigIntï¼Œåˆ™
   1. è¿”å› BigInt::equal(x, y)ã€‚
4. å¦‚æœ x æ˜¯ Stringï¼Œåˆ™
   1. å¦‚æœ x å’Œ y å…·æœ‰ç›¸åŒçš„é•¿åº¦ä¸”åœ¨ç›¸åŒä½ç½®å…·æœ‰ç›¸åŒçš„ä»£ç å•ä½ï¼Œè¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚
5. å¦‚æœ x æ˜¯ Booleanï¼Œåˆ™
   1. å¦‚æœ x å’Œ y å‡ä¸º true æˆ–å‡ä¸º falseï¼Œè¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚
6. **æ³¨æ„**ï¼šæ‰€æœ‰å…¶ä»– ECMAScript è¯­è¨€å€¼é€šè¿‡èº«ä»½æ¯”è¾ƒã€‚
7. å¦‚æœ x æ˜¯ yï¼Œè¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚

**æ³¨æ„1**ï¼šä¸ºäº†è¯´æ˜ç›®çš„ï¼Œå³ä½¿ä¸å¿…è¦ï¼Œåœ¨æ­¤ç®—æ³•ä¸­æŸäº›æƒ…å†µä¹Ÿè¢«å•ç‹¬å¤„ç†ã€‚

**æ³¨æ„2**ï¼šâ€œx æ˜¯ yâ€çš„å…·ä½“å«ä¹‰åœ¨ 5.2.7 ä¸­è¯¦ç»†è¯´æ˜ã€‚

#### 7.2.11 IsLessThan ( x, y, LeftFirst )
æŠ½è±¡æ“ä½œ IsLessThan æ¥å—å‚æ•° xï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰ï¼Œyï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ LeftFirstï¼ˆä¸€ä¸ªå¸ƒå°”å€¼ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼æˆ– undefined çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒæä¾› x < y çš„æ¯”è¾ƒè¯­ä¹‰ï¼Œè¿”å› trueã€false æˆ– undefinedï¼ˆè¡¨ç¤ºè‡³å°‘ä¸€ä¸ªæ“ä½œæ•°ä¸º NaNï¼‰ã€‚LeftFirst æ ‡å¿—ç”¨äºæ§åˆ¶å¯¹ x å’Œ y è¿›è¡Œæ“ä½œçš„é¡ºåºï¼Œå°¤å…¶æ˜¯å¯èƒ½å…·æœ‰å¯è§å‰¯ä½œç”¨çš„æ“ä½œé¡ºåºã€‚è¿™æ˜¯å¿…è¦çš„ï¼Œå› ä¸º ECMAScript è§„å®šä»å·¦åˆ°å³è¯„ä¼°è¡¨è¾¾å¼ã€‚å¦‚æœ LeftFirst ä¸º trueï¼Œåˆ™ x å‚æ•°å¯¹åº”äºè¡¨è¾¾å¼ä¸­çš„å·¦ä¾§ï¼›å¦‚æœ LeftFirst ä¸º falseï¼Œåˆ™æ“ä½œé¡ºåºç›¸åã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ LeftFirst ä¸º trueï¼Œåˆ™
   1. ä»¤ px ä¸º ? ToPrimitive(x, NUMBER)ã€‚
   2. ä»¤ py ä¸º ? ToPrimitive(y, NUMBER)ã€‚
2. å¦åˆ™ï¼Œ
   1. **æ³¨æ„**ï¼šä¸ºäº†ä¿ç•™ä»å·¦åˆ°å³çš„è¯„ä¼°é¡ºåºï¼Œéœ€è¦åè½¬è¯„ä¼°é¡ºåºã€‚
   2. ä»¤ py ä¸º ? ToPrimitive(y, NUMBER)ã€‚
   3. ä»¤ px ä¸º ? ToPrimitive(x, NUMBER)ã€‚
3. å¦‚æœ px æ˜¯ String ä¸” py æ˜¯ Stringï¼Œåˆ™
   1. ä»¤ lx ä¸º px çš„é•¿åº¦ã€‚
   2. ä»¤ ly ä¸º py çš„é•¿åº¦ã€‚
   3. å¯¹äºæ¯ä¸ªæ•´æ•° iï¼ˆ0 â‰¤ i < min(lx, ly)ï¼‰ï¼ŒæŒ‰å‡åºè¿›è¡Œï¼Œ
      1. ä»¤ cx ä¸º px ä¸­ç´¢å¼• i å¤„ä»£ç å•ä½çš„æ•°å€¼ã€‚
      2. ä»¤ cy ä¸º py ä¸­ç´¢å¼• i å¤„ä»£ç å•ä½çš„æ•°å€¼ã€‚
      3. å¦‚æœ cx < cyï¼Œè¿”å› trueã€‚
      4. å¦‚æœ cx > cyï¼Œè¿”å› falseã€‚
   4. å¦‚æœ lx < lyï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚
4. å¦åˆ™ï¼Œ
   1. å¦‚æœ px æ˜¯ BigInt ä¸” py æ˜¯ Stringï¼Œåˆ™
      1. ä»¤ ny ä¸º StringToBigInt(py)ã€‚
      2. å¦‚æœ ny æ˜¯ undefinedï¼Œè¿”å› undefinedã€‚
      3. è¿”å› BigInt::lessThan(px, ny)ã€‚
   2. å¦‚æœ px æ˜¯ String ä¸” py æ˜¯ BigIntï¼Œåˆ™
      1. ä»¤ nx ä¸º StringToBigInt(px)ã€‚
      2. å¦‚æœ nx æ˜¯ undefinedï¼Œè¿”å› undefinedã€‚
      3. è¿”å› BigInt::lessThan(nx, py)ã€‚
   3. **æ³¨æ„**ï¼šå› ä¸º px å’Œ py æ˜¯åŸå§‹å€¼ï¼Œæ‰€ä»¥è¯„ä¼°é¡ºåºä¸é‡è¦ã€‚
å¥½çš„ï¼Œç»§ç»­ç¿»è¯‘ï¼š

   4. ä»¤ nx ä¸º ? ToNumeric(px)ã€‚
   5. ä»¤ ny ä¸º ? ToNumeric(py)ã€‚
   6. å¦‚æœ Type(nx) æ˜¯ Type(ny)ï¼Œåˆ™
      1. å¦‚æœ nx æ˜¯ Numberï¼Œåˆ™
         1. è¿”å› Number::lessThan(nx, ny)ã€‚
      2. å¦åˆ™ï¼Œ
         1. æ–­è¨€ï¼šnx æ˜¯ BigIntã€‚
         2. è¿”å› BigInt::lessThan(nx, ny)ã€‚
   7. æ–­è¨€ï¼šnx æ˜¯ BigInt ä¸” ny æ˜¯ Numberï¼Œæˆ– nx æ˜¯ Number ä¸” ny æ˜¯ BigIntã€‚
   8. å¦‚æœ nx æˆ– ny æ˜¯ NaNï¼Œè¿”å› undefinedã€‚
   9. å¦‚æœ nx æ˜¯ -âˆğ”½ æˆ– ny æ˜¯ +âˆğ”½ï¼Œè¿”å› trueã€‚
   10. å¦‚æœ nx æ˜¯ +âˆğ”½ æˆ– ny æ˜¯ -âˆğ”½ï¼Œè¿”å› falseã€‚
   11. å¦‚æœ â„(nx) < â„(ny)ï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚

**æ³¨æ„1**ï¼šæ­¥éª¤ 3 ä¸å¤„ç†åŠ æ³•è¿ç®—ç¬¦ +ï¼ˆ13.15.3ï¼‰çš„ç®—æ³•ä¸­çš„æ­¥éª¤ 1.c ä¸åŒï¼Œä½¿ç”¨é€»è¾‘ä¸è¿ç®—ä»£æ›¿é€»è¾‘æˆ–è¿ç®—ã€‚

**æ³¨æ„2**ï¼šå­—ç¬¦ä¸²çš„æ¯”è¾ƒä½¿ç”¨å¯¹ UTF-16 ä»£ç å•ä½å€¼åºåˆ—çš„ç®€å•å­—å…¸æ’åºã€‚æ²¡æœ‰å°è¯•ä½¿ç”¨ Unicode è§„èŒƒä¸­å®šä¹‰çš„æ›´å¤æ‚ã€è¯­ä¹‰å¯¼å‘çš„å­—ç¬¦æˆ–å­—ç¬¦ä¸²ç›¸ç­‰å’Œæ’åºé¡ºåºã€‚å› æ­¤ï¼Œæ ¹æ® Unicode æ ‡å‡†è§„èŒƒä½†ä¸åœ¨ç›¸åŒè§„èŒƒåŒ–å½¢å¼ä¸­çš„å­—ç¬¦ä¸²å¯èƒ½æµ‹è¯•ä¸ºä¸ç›¸ç­‰ã€‚è¿˜éœ€æ³¨æ„ï¼ŒæŒ‰ä»£ç å•ä½çš„å­—å…¸æ’åºä¸åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ä¸²æŒ‰ä»£ç ç‚¹æ’åºä¸åŒã€‚

#### 7.2.12 IsLooselyEqual ( x, y )
æŠ½è±¡æ“ä½œ IsLooselyEqual æ¥å—å‚æ•° xï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ yï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒæä¾› == è¿ç®—ç¬¦çš„è¯­ä¹‰ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ Type(x) æ˜¯ Type(y)ï¼Œåˆ™
   1. è¿”å› IsStrictlyEqual(x, y)ã€‚
2. å¦‚æœ x æ˜¯ null ä¸” y æ˜¯ undefinedï¼Œè¿”å› trueã€‚
3. å¦‚æœ x æ˜¯ undefined ä¸” y æ˜¯ nullï¼Œè¿”å› trueã€‚
4. **æ³¨æ„**ï¼šæ­¤æ­¥éª¤åœ¨ B.3.6.2 èŠ‚ä¸­æ›¿æ¢ã€‚
5. å¦‚æœ x æ˜¯ Number ä¸” y æ˜¯ Stringï¼Œè¿”å› ! IsLooselyEqual(x, ! ToNumber(y))ã€‚
6. å¦‚æœ x æ˜¯ String ä¸” y æ˜¯ Numberï¼Œè¿”å› ! IsLooselyEqual(! ToNumber(x), y)ã€‚
7. å¦‚æœ x æ˜¯ BigInt ä¸” y æ˜¯ Stringï¼Œåˆ™
   1. ä»¤ n ä¸º StringToBigInt(y)ã€‚
   2. å¦‚æœ n æ˜¯ undefinedï¼Œè¿”å› falseã€‚
   3. è¿”å› ! IsLooselyEqual(x, n)ã€‚
8. å¦‚æœ x æ˜¯ String ä¸” y æ˜¯ BigIntï¼Œè¿”å› ! IsLooselyEqual(y, x)ã€‚
9. å¦‚æœ x æ˜¯ Booleanï¼Œè¿”å› ! IsLooselyEqual(! ToNumber(x), y)ã€‚
10. å¦‚æœ y æ˜¯ Booleanï¼Œè¿”å› ! IsLooselyEqual(x, ! ToNumber(y))ã€‚
11. å¦‚æœ x æ˜¯ Stringã€Numberã€BigInt æˆ– Symbol ä¸” y æ˜¯å¯¹è±¡ï¼Œè¿”å› ! IsLooselyEqual(x, ? ToPrimitive(y))ã€‚
12. å¦‚æœ x æ˜¯å¯¹è±¡ä¸” y æ˜¯ Stringã€Numberã€BigInt æˆ– Symbolï¼Œè¿”å› ! IsLooselyEqual(? ToPrimitive(x), y)ã€‚
13. å¦‚æœ x æ˜¯ BigInt ä¸” y æ˜¯ Numberï¼Œæˆ– x æ˜¯ Number ä¸” y æ˜¯ BigIntï¼Œåˆ™
    1. å¦‚æœ x ä¸æ˜¯æœ‰é™å€¼æˆ– y ä¸æ˜¯æœ‰é™å€¼ï¼Œè¿”å› falseã€‚
    2. å¦‚æœ â„(x) = â„(y)ï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚
14. è¿”å› falseã€‚

#### 7.2.13 IsStrictlyEqual ( x, y )
æŠ½è±¡æ“ä½œ IsStrictlyEqual æ¥å—å‚æ•° xï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ yï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚å®ƒæä¾› === è¿ç®—ç¬¦çš„è¯­ä¹‰ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ Type(x) ä¸æ˜¯ Type(y)ï¼Œè¿”å› falseã€‚
2. å¦‚æœ x æ˜¯ Numberï¼Œåˆ™
   1. è¿”å› Number::equal(x, y)ã€‚
3. è¿”å› SameValueNonNumber(x, y)ã€‚

**æ³¨æ„**ï¼š
æ­¤ç®—æ³•åœ¨å¤„ç†å¸¦ç¬¦å·çš„é›¶å’Œ NaN æ—¶ä¸ SameValue ç®—æ³•ä¸åŒã€‚

#### 7.3 å¯¹è±¡ä¸Šçš„æ“ä½œ

#### 7.3.1 MakeBasicObject ( internalSlotsList )
æŠ½è±¡æ“ä½œ MakeBasicObject æ¥å—å‚æ•° internalSlotsListï¼ˆä¸€ä¸ªå†…éƒ¨æ§½åç§°åˆ—è¡¨ï¼‰å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚å®ƒæ˜¯æ‰€æœ‰é€šè¿‡ç®—æ³•åˆ›å»ºçš„ ECMAScript å¯¹è±¡çš„æ¥æºï¼ŒåŒ…æ‹¬æ™®é€šå¯¹è±¡å’Œå¼‚ç±»å¯¹è±¡ã€‚å®ƒå°†åˆ›å»ºæ‰€æœ‰å¯¹è±¡çš„å¸¸ç”¨æ­¥éª¤åˆ†ç¦»å‡ºæ¥ï¼Œå¹¶é›†ä¸­åœ¨å¯¹è±¡åˆ›å»ºä¸Šã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ obj ä¸ºä¸€ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå…¶å†…éƒ¨æ§½ä¸º internalSlotsList ä¸­çš„æ¯ä¸ªåç§°åˆ†é…ä¸€ä¸ªå†…éƒ¨æ§½ã€‚
2. å°† obj çš„åŸºæœ¬å†…éƒ¨æ–¹æ³•è®¾ç½®ä¸º 10.1 è§„èŒƒä¸­çš„æ™®é€šå¯¹è±¡å®šä¹‰çš„é»˜è®¤å€¼ã€‚
3. æ–­è¨€ï¼šå¦‚æœè°ƒç”¨è€…ä¸ä¼šè¦†ç›– obj çš„ [[GetPrototypeOf]] å’Œ [[SetPrototypeOf]] åŸºæœ¬å†…éƒ¨æ–¹æ³•ï¼Œåˆ™ internalSlotsList åŒ…å« [[Prototype]]ã€‚
4. æ–­è¨€ï¼šå¦‚æœè°ƒç”¨è€…ä¸ä¼šè¦†ç›– obj çš„ [[SetPrototypeOf]]ã€[[IsExtensible]] å’Œ [[PreventExtensions]] æ‰€æœ‰çš„åŸºæœ¬å†…éƒ¨æ–¹æ³•ï¼Œåˆ™ internalSlotsList åŒ…å« [[Extensible]]ã€‚
5. å¦‚æœ internalSlotsList åŒ…å« [[Extensible]]ï¼Œè®¾ç½® obj.[[Extensible]] ä¸º trueã€‚
6. è¿”å› objã€‚

**æ³¨æ„**ï¼šåœ¨æ­¤è§„èŒƒä¸­ï¼Œå¼‚ç±»å¯¹è±¡é€šè¿‡è¯¸å¦‚ ArrayCreate å’Œ BoundFunctionCreate ç­‰æŠ½è±¡æ“ä½œåˆ›å»ºï¼Œé¦–å…ˆè°ƒç”¨ MakeBasicObject è·å–åŸºç¡€å¯¹è±¡ï¼Œç„¶åè¦†ç›–è¯¥å¯¹è±¡çš„ä¸€äº›æˆ–å…¨éƒ¨å†…éƒ¨æ–¹æ³•ã€‚ä¸ºäº†å°è£…å¼‚ç±»å¯¹è±¡çš„åˆ›å»ºï¼Œç»ä¸ä¼šåœ¨è¿™äº›æ“ä½œä¹‹å¤–ä¿®æ”¹å¯¹è±¡çš„åŸºæœ¬å†…éƒ¨æ–¹æ³•ã€‚

#### 7.3.2 Get ( O, P )
æŠ½è±¡æ“ä½œ Get æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºæ£€ç´¢å¯¹è±¡çš„ç‰¹å®šå±æ€§çš„å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. è¿”å› ? O.[[Get]](P, O)ã€‚

#### 7.3.3 GetV ( V, P )
æŠ½è±¡æ“ä½œ GetV æ¥å—å‚æ•° Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºæ£€ç´¢ ECMAScript è¯­è¨€å€¼çš„ç‰¹å®šå±æ€§çš„å€¼ã€‚å¦‚æœè¯¥å€¼ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨é€‚ç”¨äºè¯¥å€¼ç±»å‹çš„åŒ…è£…å¯¹è±¡è¿›è¡Œå±æ€§æŸ¥æ‰¾ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ O ä¸º ? ToObject(V)ã€‚
2. è¿”å› ? O.[[Get]](P, V)ã€‚

#### 7.3.4 Set ( O, P, V, Throw )
æŠ½è±¡æ“ä½œ Set æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰ã€Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ Throwï¼ˆä¸€ä¸ªå¸ƒå°”å€¼ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºè®¾ç½®å¯¹è±¡çš„ç‰¹å®šå±æ€§çš„å€¼ã€‚V æ˜¯è¯¥å±æ€§çš„æ–°å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ success ä¸º ? O.[[Set]](P, V, O)ã€‚
2. å¦‚æœ success ä¸º false ä¸” Throw ä¸º trueï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. è¿”å› UNUSEDã€‚

#### 7.3.5 CreateDataProperty ( O, P, V )
æŠ½è±¡æ“ä½œ CreateDataProperty æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å’Œ Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºåˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªæ–°è‡ªæœ‰å±æ€§ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ newDesc ä¸º PropertyDescriptor { [[Value]]: V, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true }ã€‚
2. è¿”å› ? O.[[DefineOwnProperty]](P, newDesc)ã€‚

**æ³¨æ„**ï¼šæ­¤æŠ½è±¡æ“ä½œåˆ›å»ºçš„å±æ€§çš„å±æ€§è®¾ç½®ä¸ºä¸ ECMAScript è¯­è¨€èµ‹å€¼æ“ä½œç¬¦åˆ›å»ºçš„å±æ€§ç›¸åŒçš„é»˜è®¤å€¼ã€‚é€šå¸¸ï¼Œè¯¥å±æ€§ä¸ä¼šå·²ç»å­˜åœ¨ã€‚å¦‚æœå®ƒç¡®å®å­˜åœ¨ä¸”ä¸å¯é…ç½®ï¼Œæˆ–å¦‚æœ O ä¸å¯æ‰©å±•ï¼Œåˆ™ [[DefineOwnProperty]] å°†è¿”å› falseã€‚

#### 7.3.6 CreateDataPropertyOrThrow ( O, P, V )
æŠ½è±¡æ“ä½œ CreateDataPropertyOrThrow æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å’Œ Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºåˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªæ–°è‡ªæœ‰å±æ€§ã€‚å¦‚æœè¯·æ±‚çš„å±æ€§æ›´æ–°æ— æ³•æ‰§è¡Œï¼Œåˆ™æŠ›å‡º TypeError å¼‚å¸¸ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ success ä¸º ? CreateDataProperty(O, P, V)ã€‚
2. å¦‚æœ success ä¸º falseï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. è¿”å› UNUSEDã€‚

**æ³¨æ„**ï¼šæ­¤æŠ½è±¡æ“ä½œåˆ›å»ºçš„å±æ€§çš„å±æ€§è®¾ç½®ä¸ºä¸ ECMAScript è¯­è¨€èµ‹å€¼æ“ä½œç¬¦åˆ›å»ºçš„å±æ€§ç›¸åŒçš„é»˜è®¤å€¼ã€‚é€šå¸¸ï¼Œè¯¥å±æ€§ä¸ä¼šå·²ç»å­˜åœ¨ã€‚å¦‚æœå®ƒç¡®å®å­˜åœ¨ä¸”ä¸å¯é…ç½®ï¼Œæˆ–å¦‚æœ O ä¸å¯æ‰©å±•ï¼Œåˆ™ [[DefineOwnProperty]] å°†è¿”å› falseï¼Œå¯¼è‡´æ­¤æ“ä½œæŠ›å‡º TypeError å¼‚å¸¸ã€‚

#### 7.3.7 CreateNonEnumerableDataPropertyOrThrow ( O, P, V )
æŠ½è±¡æ“ä½œ CreateNonEnumerableDataPropertyOrThrow æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å’Œ Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å› UNUSEDã€‚å®ƒç”¨äºåˆ›å»ºæ™®é€šå¯¹è±¡çš„ä¸€ä¸ªæ–°ä¸å¯æšä¸¾è‡ªæœ‰å±æ€§ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ–­è¨€ï¼šO æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯æ‰©å±•å¯¹è±¡ï¼Œæ²¡æœ‰ä¸å¯é…ç½®çš„å±æ€§ã€‚
2. ä»¤ newDesc ä¸º PropertyDescriptor { [[Value]]: V, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true }ã€‚
3. æ‰§è¡Œ ! DefinePropertyOrThrow(O, P, newDesc)ã€‚
4. è¿”å› UNUSEDã€‚

**æ³¨æ„**ï¼šæ­¤æŠ½è±¡æ“ä½œåˆ›å»ºçš„å±æ€§çš„å±æ€§è®¾ç½®ä¸ºä¸ ECMAScript è¯­è¨€èµ‹å€¼æ“ä½œç¬¦åˆ›å»ºçš„å±æ€§ç›¸åŒçš„é»˜è®¤å€¼ï¼Œé™¤äº†å®ƒä¸å¯æšä¸¾ã€‚é€šå¸¸ï¼Œè¯¥å±æ€§ä¸ä¼šå·²ç»å­˜åœ¨ã€‚å¦‚æœå®ƒç¡®å®å­˜åœ¨ï¼ŒDefinePropertyOrThrow ä¿è¯æ­£å¸¸å®Œæˆã€‚

#### 7.3.8 DefinePropertyOrThrow ( O, P, desc )
æŠ½è±¡æ“ä½œ DefinePropertyOrThrow æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å’Œ descï¼ˆä¸€ä¸ªå±æ€§æè¿°ç¬¦ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºä»¥ä¸€ç§åœ¨è¯·æ±‚çš„å±æ€§æ›´æ–°æ— æ³•æ‰§è¡Œæ—¶ä¼šæŠ›å‡º TypeError å¼‚å¸¸çš„æ–¹å¼è°ƒç”¨å¯¹è±¡çš„ [[DefineOwnProperty]] å†…éƒ¨æ–¹æ³•ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ success ä¸º ? O.[[DefineOwnProperty]](P, desc)ã€‚
2. å¦‚æœ success ä¸º falseï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. è¿”å› UNUSEDã€‚

#### 7.3.9 DeletePropertyOrThrow ( O, P )
æŠ½è±¡æ“ä½œ DeletePropertyOrThrow æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºåˆ é™¤å¯¹è±¡çš„ä¸€ä¸ªç‰¹å®šè‡ªæœ‰å±æ€§ã€‚å¦‚æœè¯¥å±æ€§ä¸å¯é…ç½®ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ success ä¸º ? O.[[Delete]](P)ã€‚
2. å¦‚æœ success ä¸º falseï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. è¿”å› UNUSEDã€‚

#### 7.3.10 GetMethod ( V, P )
æŠ½è±¡æ“ä½œ GetMethod æ¥å—å‚æ•° Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å¹¶è¿”å›åŒ…å«å‡½æ•°å¯¹è±¡æˆ– undefined çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºè·å– ECMAScript è¯­è¨€å€¼çš„ç‰¹å®šå±æ€§çš„å€¼ï¼Œå½“è¯¥å±æ€§çš„å€¼é¢„æœŸä¸ºå‡½æ•°æ—¶ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ func ä¸º ? GetV(V, P)ã€‚
2. å¦‚æœ func ä¸º undefined æˆ– nullï¼Œè¿”å› undefinedã€‚
3. å¦‚æœ IsCallable(func) ä¸º falseï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
4. è¿”å› funcã€‚

#### 7.3.11 HasProperty ( O, P )
æŠ½è±¡æ“ä½œ HasProperty æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºç¡®å®šå¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šå±æ€§é”®çš„å±æ€§ã€‚è¯¥å±æ€§å¯ä»¥æ˜¯è‡ªæœ‰çš„æˆ–ç»§æ‰¿çš„ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. è¿”å› ? O.[[HasProperty]](P)ã€‚

#### 7.3.12 HasOwnProperty ( O, P )
æŠ½è±¡æ“ä½œ HasOwnProperty æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºç¡®å®šå¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šå±æ€§é”®çš„è‡ªæœ‰å±æ€§ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ desc ä¸º ? O.[[GetOwnProperty]](P)ã€‚
2. å¦‚æœ desc ä¸º undefinedï¼Œè¿”å› falseã€‚
3. è¿”å› trueã€‚

#### 7.3.13 Call ( F, V [ , argumentsList ] )
æŠ½è±¡æ“ä½œ Call æ¥å—å‚æ•° Fï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰åŠå¯é€‰å‚æ•° argumentsListï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼åˆ—è¡¨ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºè°ƒç”¨å‡½æ•°å¯¹è±¡çš„ [[Call]] å†…éƒ¨æ–¹æ³•ã€‚F æ˜¯å‡½æ•°å¯¹è±¡ï¼ŒV æ˜¯ [[Call]] çš„ this å€¼ï¼ŒargumentsList æ˜¯ä¼ é€’ç»™å†…éƒ¨æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ã€‚å¦‚æœ argumentsList ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ä½œä¸ºå…¶å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argumentsList ä¸å­˜åœ¨ï¼Œåˆ™å°† argumentsList è®¾ç½®ä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
2. å¦‚æœ IsCallable(F) ä¸º falseï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. è¿”å› ? F.[[Call]](V, argumentsList)ã€‚

#### 7.3.14 Construct ( F [ , argumentsList [ , newTarget ] ] )
æŠ½è±¡æ“ä½œ Construct æ¥å—å‚æ•° Fï¼ˆä¸€ä¸ªæ„é€ å‡½æ•°ï¼‰åŠå¯é€‰å‚æ•° argumentsListï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼åˆ—è¡¨ï¼‰å’Œ newTargetï¼ˆä¸€ä¸ªæ„é€ å‡½æ•°ï¼‰å¹¶è¿”å›åŒ…å«å¯¹è±¡çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºè°ƒç”¨å‡½æ•°å¯¹è±¡çš„ [[Construct]] å†…éƒ¨æ–¹æ³•ã€‚argumentsList å’Œ newTarget æ˜¯ä¼ é€’ç»™å†…éƒ¨æ–¹æ³•çš„å¯¹åº”å‚æ•°çš„å€¼ã€‚å¦‚æœ argumentsList ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ä½œä¸ºå…¶å€¼ã€‚å¦‚æœ newTarget ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ F ä½œä¸ºå…¶å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ newTarget ä¸å­˜åœ¨ï¼Œåˆ™å°† newTarget è®¾ç½®ä¸º Fã€‚
2. å¦‚æœ argumentsList ä¸å­˜åœ¨ï¼Œåˆ™å°† argumentsList è®¾ç½®ä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
3. è¿”å› ? F.[[Construct]](argumentsList, newTarget)ã€‚

**æ³¨æ„**ï¼šå¦‚æœ newTarget ä¸å­˜åœ¨ï¼Œæ­¤æ“ä½œç­‰åŒäºï¼šnew F(...argumentsList)

#### 7.3.15 SetIntegrityLevel ( O, level )
æŠ½è±¡æ“ä½œ SetIntegrityLevel æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ levelï¼ˆSEALED æˆ– FROZENï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºå›ºå®šå¯¹è±¡çš„è‡ªæœ‰å±æ€§é›†ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ status ä¸º ? O.[[PreventExtensions]]()ã€‚
2. å¦‚æœ status ä¸º falseï¼Œè¿”å› falseã€‚
3. ä»¤ keys ä¸º ? O.[[OwnPropertyKeys]]()ã€‚
4. å¦‚æœ level æ˜¯ SEALEDï¼Œåˆ™
   a. å¯¹äº keys çš„æ¯ä¸ªå…ƒç´  kï¼Œæ‰§è¡Œ
      i. æ‰§è¡Œ ? DefinePropertyOrThrow(O, k, PropertyDescriptor { [[Configurable]]: false })ã€‚
5. å¦åˆ™ï¼Œ
   a. æ–­è¨€ï¼šlevel æ˜¯ FROZENã€‚
   b. å¯¹äº keys çš„æ¯ä¸ªå…ƒç´  kï¼Œæ‰§è¡Œ
      i. ä»¤ currentDesc ä¸º ? O.[[GetOwnProperty]](k)ã€‚
      ii. å¦‚æœ currentDesc ä¸ä¸º undefinedï¼Œåˆ™
         1. å¦‚æœ IsAccessorDescriptor(currentDesc) ä¸º trueï¼Œåˆ™
            a. ä»¤ desc ä¸º PropertyDescriptor { [[Configurable]]: false }ã€‚
         2. å¦åˆ™ï¼Œ
            a. ä»¤ desc ä¸º PropertyDescriptor { [[Configurable]]: false, [[Writable]]: false }ã€‚
         3. æ‰§è¡Œ ? DefinePropertyOrThrow(O, k, desc)ã€‚
6. è¿”å› trueã€‚

#### 7.3.16 TestIntegrityLevel ( O, level )
æŠ½è±¡æ“ä½œ TestIntegrityLevel æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ levelï¼ˆSEALED æˆ– FROZENï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºç¡®å®šå¯¹è±¡çš„è‡ªæœ‰å±æ€§é›†æ˜¯å¦å·²å›ºå®šã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ extensible ä¸º ? IsExtensible(O)ã€‚
2. å¦‚æœ extensible ä¸º trueï¼Œè¿”å› falseã€‚
3. **æ³¨æ„**ï¼šå¦‚æœå¯¹è±¡æ˜¯å¯æ‰©å±•çš„ï¼Œåˆ™ä¸ä¼šæ£€æŸ¥å…¶ä»»ä½•å±æ€§ã€‚
4. ä»¤ keys ä¸º ? O.[[OwnPropertyKeys]]()ã€‚
5. å¯¹äº keys çš„æ¯ä¸ªå…ƒç´  kï¼Œæ‰§è¡Œ
   a. ä»¤ currentDesc ä¸º ? O.[[GetOwnProperty]](k)ã€‚
   b. å¦‚æœ currentDesc ä¸ä¸º undefinedï¼Œåˆ™
      i. å¦‚æœ currentDesc.[[Configurable]] ä¸º trueï¼Œè¿”å› falseã€‚
      ii. å¦‚æœ level æ˜¯ FROZEN ä¸” IsDataDescriptor(currentDesc) ä¸º trueï¼Œåˆ™
         1. å¦‚æœ currentDesc.[[Writable]] ä¸º trueï¼Œè¿”å› falseã€‚
6. è¿”å› trueã€‚

#### 7.3.17 CreateArrayFromList ( elements )
æŠ½è±¡æ“ä½œ CreateArrayFromList æ¥å—å‚æ•° elementsï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼åˆ—è¡¨ï¼‰å¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚å®ƒç”¨äºåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶å…ƒç´ ç”± elements æä¾›ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ array ä¸º ! ArrayCreate(0)ã€‚
2. ä»¤ n ä¸º 0ã€‚
3. å¯¹äº elements çš„æ¯ä¸ªå…ƒç´  eï¼Œæ‰§è¡Œ
   a. æ‰§è¡Œ ! CreateDataPropertyOrThrow(array, ! ToString(ğ”½(n)), e)ã€‚
   b. è®¾ç½® n ä¸º n + 1ã€‚
4. è¿”å› arrayã€‚

#### 7.3.18 LengthOfArrayLike ( obj )
æŠ½è±¡æ“ä½œ LengthOfArrayLike æ¥å—å‚æ•° objï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å¹¶è¿”å›åŒ…å«éè´Ÿæ•´æ•°çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒè¿”å›ç±»æ•°ç»„å¯¹è±¡çš„ "length" å±æ€§çš„å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. è¿”å› â„(? ToLength(? Get(obj, "length")))ã€‚

ç±»æ•°ç»„å¯¹è±¡æ˜¯ä»»ä½•æ­¤æ“ä½œè¿”å›æ­£å¸¸å®Œæˆçš„å¯¹è±¡ã€‚

**æ³¨æ„ 1**ï¼šé€šå¸¸ï¼Œç±»æ•°ç»„å¯¹è±¡ä¹Ÿä¼šæœ‰ä¸€äº›å…·æœ‰æ•´æ•°ç´¢å¼•åç§°çš„å±æ€§ã€‚ç„¶è€Œï¼Œè¿™ä¸æ˜¯è¯¥å®šä¹‰çš„è¦æ±‚ã€‚
**æ³¨æ„ 2**ï¼šæ•°ç»„å’Œå­—ç¬¦ä¸²å¯¹è±¡æ˜¯ç±»æ•°ç»„å¯¹è±¡çš„ç¤ºä¾‹ã€‚

#### 7.3.19 CreateListFromArrayLike ( obj [ , elementTypes ] )
æŠ½è±¡æ“ä½œ CreateListFromArrayLike æ¥å—å‚æ•° objï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œå¯é€‰å‚æ•° elementTypesï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€ç±»å‹åç§°åˆ—è¡¨ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼åˆ—è¡¨çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºåˆ›å»ºä¸€ä¸ªåˆ—è¡¨å€¼ï¼Œå…¶å…ƒç´ ç”± obj çš„ç´¢å¼•å±æ€§æä¾›ã€‚elementTypes åŒ…å«å…è®¸ä½œä¸ºåˆ›å»ºçš„åˆ—è¡¨å…ƒç´ å€¼çš„ ECMAScript è¯­è¨€ç±»å‹çš„åç§°ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ elementTypes ä¸å­˜åœ¨ï¼Œåˆ™å°† elementTypes è®¾ç½®ä¸º Â« Undefined, Null, Boolean, String, Symbol, Number, BigInt, Object Â»ã€‚
2. å¦‚æœ obj ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. ä»¤ len ä¸º ? LengthOfArrayLike(obj)ã€‚
4. ä»¤ list ä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
5. ä»¤ index ä¸º 0ã€‚
6. é‡å¤ï¼Œç›´åˆ° index < lenï¼Œ
   a. ä»¤ indexName ä¸º ! ToString(ğ”½(index))ã€‚
   b. ä»¤ next ä¸º ? Get(obj, indexName)ã€‚
   c. å¦‚æœ elementTypes ä¸åŒ…å« Type(next)ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
   d. å°† next é™„åŠ åˆ° listã€‚
   e. è®¾ç½® index ä¸º index + 1ã€‚
7. è¿”å› listã€‚

#### 7.3.20 Invoke ( V, P [ , argumentsList ] )
æŠ½è±¡æ“ä½œ Invoke æ¥å—å‚æ•° Vï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ Pï¼ˆä¸€ä¸ªå±æ€§é”®ï¼‰åŠå¯é€‰å‚æ•° argumentsListï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼åˆ—è¡¨ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºè°ƒç”¨ ECMAScript è¯­è¨€å€¼çš„æ–¹æ³•å±æ€§ã€‚V ä½œä¸ºå±æ€§çš„æŸ¥æ‰¾ç‚¹å’Œè°ƒç”¨çš„ this å€¼ã€‚argumentsList æ˜¯ä¼ é€’ç»™æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ã€‚å¦‚æœ argumentsList ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ä½œä¸ºå…¶å€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ argumentsList ä¸å­˜åœ¨ï¼Œåˆ™å°† argumentsList è®¾ç½®ä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
2. ä»¤ func ä¸º ? GetV(V, P)ã€‚
3. è¿”å› ? Call(func, V, argumentsList)ã€‚

#### 7.3.21 OrdinaryHasInstance ( C, O )
æŠ½è±¡æ“ä½œ OrdinaryHasInstance æ¥å—å‚æ•° Cï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ Oï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒå®ç°äº†ç¡®å®š O æ˜¯å¦ç»§æ‰¿è‡ª C æä¾›çš„å®ä¾‹å¯¹è±¡ç»§æ‰¿è·¯å¾„çš„é»˜è®¤ç®—æ³•ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ IsCallable(C) ä¸º falseï¼Œè¿”å› falseã€‚
2. å¦‚æœ C å…·æœ‰ [[BoundTargetFunction]] å†…éƒ¨æ§½ï¼Œåˆ™
   a. ä»¤ BC ä¸º C.[[BoundTargetFunction]]ã€‚
   b. è¿”å› ? InstanceofOperator(O, BC)ã€‚
3. å¦‚æœ O ä¸æ˜¯å¯¹è±¡ï¼Œè¿”å› falseã€‚
4. ä»¤ P ä¸º ? Get(C, "prototype")ã€‚
5. å¦‚æœ P ä¸æ˜¯å¯¹è±¡ï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
6. é‡å¤ï¼Œ
   a. è®¾ç½® O ä¸º ? O.[[GetPrototypeOf]]()ã€‚
   b. å¦‚æœ O ä¸º nullï¼Œè¿”å› falseã€‚
   c. å¦‚æœ SameValue(P, O) ä¸º trueï¼Œè¿”å› trueã€‚

#### 7.3.22 SpeciesConstructor ( O, defaultConstructor )
æŠ½è±¡æ“ä½œ SpeciesConstructor æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ defaultConstructorï¼ˆä¸€ä¸ªæ„é€ å‡½æ•°ï¼‰å¹¶è¿”å›åŒ…å«æ„é€ å‡½æ•°çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒç”¨äºæ£€ç´¢åº”ä½¿ç”¨çš„æ„é€ å‡½æ•°ä»¥åˆ›å»ºä» O æ´¾ç”Ÿçš„æ–°å¯¹è±¡ã€‚defaultConstructor æ˜¯åœ¨ä» O å¼€å§‹æ‰¾ä¸åˆ°æ„é€ å‡½æ•° @@species å±æ€§æ—¶ä½¿ç”¨çš„æ„é€ å‡½æ•°ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ C ä¸º ? Get(O, "constructor")ã€‚
2. å¦‚æœ C æ˜¯ undefinedï¼Œè¿”å› defaultConstructorã€‚
3. å¦‚æœ C ä¸æ˜¯å¯¹è±¡ï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
4. ä»¤ S ä¸º ? Get(C, @@species)ã€‚
5. å¦‚æœ S æ˜¯ undefined æˆ– nullï¼Œè¿”å› defaultConstructorã€‚
6. å¦‚æœ IsConstructor(S) ä¸º trueï¼Œè¿”å› Sã€‚
7. æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚

#### 7.3.23 EnumerableOwnProperties ( O, kind )
æŠ½è±¡æ“ä½œ EnumerableOwnProperties æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ kindï¼ˆKEYã€VALUE æˆ– KEY+VALUEï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼åˆ—è¡¨çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ ownKeys ä¸º ? O.[[OwnPropertyKeys]]()ã€‚
2. ä»¤ results ä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
3. å¯¹äº ownKeys çš„æ¯ä¸ªå…ƒç´  keyï¼Œæ‰§è¡Œ
   a. å¦‚æœ key æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™
      i. ä»¤ desc ä¸º ? O.[[GetOwnProperty]](key)ã€‚
      ii. å¦‚æœ desc ä¸ä¸º undefined ä¸” desc.[[Enumerable]] ä¸º trueï¼Œåˆ™
         1. å¦‚æœ kind æ˜¯ KEYï¼Œåˆ™
            a. å°† key é™„åŠ åˆ° resultsã€‚
         2. å¦åˆ™ï¼Œ
            a. ä»¤ value ä¸º ? Get(O, key)ã€‚
            b. å¦‚æœ kind æ˜¯ VALUEï¼Œåˆ™
               i. å°† value é™„åŠ åˆ° resultsã€‚
            c. å¦åˆ™ï¼Œ
               i. æ–­è¨€ï¼škind æ˜¯ KEY+VALUEã€‚
               ii. ä»¤ entry ä¸º CreateArrayFromList(Â« key, value Â»)ã€‚
               iii. å°† entry é™„åŠ åˆ° resultsã€‚
4. è¿”å› resultsã€‚

#### 7.3.24 GetFunctionRealm ( obj )
æŠ½è±¡æ“ä½œ GetFunctionRealm æ¥å—å‚æ•° objï¼ˆä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼‰å¹¶è¿”å›åŒ…å« Realm Record çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ obj å…·æœ‰ [[Realm]] å†…éƒ¨æ§½ï¼Œåˆ™
   a. è¿”å› obj.[[Realm]]ã€‚
2. å¦‚æœ obj æ˜¯ä¸€ä¸ªç»‘å®šå‡½æ•°å¼‚ç±»å¯¹è±¡ï¼Œåˆ™
   a. ä»¤ boundTargetFunction ä¸º obj.[[BoundTargetFunction]]ã€‚
   b. è¿”å› ? GetFunctionRealm(boundTargetFunction)ã€‚
3. å¦‚æœ obj æ˜¯ä¸€ä¸ªä»£ç†å¼‚ç±»å¯¹è±¡ï¼Œåˆ™
   a. æ‰§è¡Œ ? ValidateNonRevokedProxy(obj)ã€‚
   b. ä»¤ proxyTarget ä¸º obj.[[ProxyTarget]]ã€‚
   c. è¿”å› ? GetFunctionRealm(proxyTarget)ã€‚
4. è¿”å›å½“å‰ Realm Recordã€‚

**æ³¨æ„**ï¼šæ­¥éª¤ 4 åªä¼šåœ¨ obj æ˜¯ä¸€ä¸ªä¸å…·æœ‰ [[Realm]] å†…éƒ¨æ§½çš„éæ ‡å‡†å‡½æ•°å¼‚ç±»å¯¹è±¡æ—¶æ‰ä¼šåˆ°è¾¾ã€‚

#### 7.3.25 CopyDataProperties ( target, source, excludedItems )
æŠ½è±¡æ“ä½œ CopyDataProperties æ¥å—å‚æ•° targetï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€sourceï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ excludedItemsï¼ˆä¸€ä¸ªå±æ€§é”®åˆ—è¡¨ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ source æ˜¯ undefined æˆ– nullï¼Œè¿”å› UNUSEDã€‚
2. ä»¤ from ä¸º ! ToObject(source)ã€‚
3. ä»¤ keys ä¸º ? from.[[OwnPropertyKeys]]()ã€‚
4. å¯¹äº keys çš„æ¯ä¸ªå…ƒç´  nextKeyï¼Œæ‰§è¡Œ
   a. ä»¤ excluded ä¸º falseã€‚
   b. å¯¹äº excludedItems çš„æ¯ä¸ªå…ƒç´  eï¼Œæ‰§è¡Œ
      i. å¦‚æœ SameValue(e, nextKey) ä¸º trueï¼Œåˆ™
         1. å°† excluded è®¾ç½®ä¸º trueã€‚
   c. å¦‚æœ excluded ä¸º falseï¼Œåˆ™
      i. ä»¤ desc ä¸º ? from.[[GetOwnProperty]](nextKey)ã€‚
      ii. å¦‚æœ desc ä¸ä¸º undefined ä¸” desc.[[Enumerable]] ä¸º trueï¼Œåˆ™
         1. ä»¤ propValue ä¸º ? Get(from, nextKey)ã€‚
         2. æ‰§è¡Œ ! CreateDataPropertyOrThrow(target, nextKey, propValue)ã€‚
5. è¿”å› UNUSEDã€‚

**æ³¨æ„**ï¼šä¼ å…¥çš„ target æ€»æ˜¯ä¸€ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œåœ¨æŠ›å‡ºé”™è¯¯æ—¶æ— æ³•ç›´æ¥è®¿é—®ã€‚

#### 7.3.26 PrivateElementFind ( O, P )
æŠ½è±¡æ“ä½œ PrivateElementFind æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ Pï¼ˆä¸€ä¸ªç§æœ‰åç§°ï¼‰å¹¶è¿”å›ä¸€ä¸ª PrivateElement æˆ– EMPTYã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ O.[[PrivateElements]] åŒ…å«ä¸€ä¸ª PrivateElement pe ä½¿å¾— pe.[[Key]] æ˜¯ Pï¼Œåˆ™
   a. è¿”å› peã€‚
2. è¿”å› EMPTYã€‚

#### 7.3.27 PrivateFieldAdd ( O, P, value )
æŠ½è±¡æ“ä½œ PrivateFieldAdd æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€Pï¼ˆä¸€ä¸ªç§æœ‰åç§°ï¼‰å’Œ valueï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœä¸»æœºæ˜¯ä¸€ä¸ª Web æµè§ˆå™¨ï¼Œåˆ™
   a. æ‰§è¡Œ ? HostEnsureCanAddPrivateElement(O)ã€‚
2. ä»¤ entry ä¸º PrivateElementFind(O, P)ã€‚
3. å¦‚æœ entry ä¸æ˜¯ EMPTYï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
4. å°† PrivateElement { [[Key]]: P, [[Kind]]: FIELD, [[Value]]: value } é™„åŠ åˆ° O.[[PrivateElements]]ã€‚
5. è¿”å› UNUSEDã€‚

#### 7.3.28 PrivateMethodOrAccessorAdd ( O, method )
æŠ½è±¡æ“ä½œ PrivateMethodOrAccessorAdd æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ methodï¼ˆä¸€ä¸ª PrivateElementï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ–­è¨€ï¼šmethod.[[Kind]] æ˜¯ METHOD æˆ– ACCESSORã€‚
2. å¦‚æœä¸»æœºæ˜¯ä¸€ä¸ª Web æµè§ˆå™¨ï¼Œåˆ™
   a. æ‰§è¡Œ ? HostEnsureCanAddPrivateElement(O)ã€‚
3. ä»¤ entry ä¸º PrivateElementFind(O, method.[[Key]])ã€‚
4. å¦‚æœ entry ä¸æ˜¯ EMPTYï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
5. å°† method é™„åŠ åˆ° O.[[PrivateElements]]ã€‚
6. è¿”å› UNUSEDã€‚

**æ³¨æ„**ï¼šç§æœ‰æ–¹æ³•å’Œè®¿é—®å™¨çš„å€¼åœ¨å®ä¾‹é—´å…±äº«ã€‚æ­¤æ“ä½œä¸ä¼šåˆ›å»ºæ–¹æ³•æˆ–è®¿é—®å™¨çš„æ–°å‰¯æœ¬ã€‚

#### 7.3.29 HostEnsureCanAddPrivateElement ( O )
ä¸»æœºå®šä¹‰çš„æŠ½è±¡æ“ä½œ HostEnsureCanAddPrivateElement æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒå…è®¸ä¸»æœºç¯å¢ƒé˜»æ­¢å°†ç§æœ‰å…ƒç´ æ·»åŠ åˆ°ç‰¹å®šçš„ä¸»æœºå®šä¹‰çš„å¼‚ç±»å¯¹è±¡ã€‚

HostEnsureCanAddPrivateElement çš„å®ç°å¿…é¡»ç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š

- å¦‚æœ O ä¸æ˜¯ä¸»æœºå®šä¹‰çš„å¼‚ç±»å¯¹è±¡ï¼Œæ­¤æŠ½è±¡æ“ä½œå¿…é¡»è¿”å› NormalCompletion(UNUSED) å¹¶ä¸”ä¸æ‰§è¡Œå…¶ä»–æ­¥éª¤ã€‚
- æ­¤æŠ½è±¡æ“ä½œçš„ä¸¤æ¬¡è°ƒç”¨ï¼Œå¦‚æœå‚æ•°ç›¸åŒï¼Œå¿…é¡»è¿”å›ç›¸åŒç§ç±»çš„å®Œæˆè®°å½•ã€‚
- HostEnsureCanAddPrivateElement çš„é»˜è®¤å®ç°æ˜¯è¿”å› NormalCompletion(UNUSED)ã€‚

æ­¤æŠ½è±¡æ“ä½œä»…ç”±ä½œä¸º Web æµè§ˆå™¨çš„ ECMAScript ä¸»æœºè°ƒç”¨ã€‚

#### 7.3.30 PrivateGet ( O, P )
æŠ½è±¡æ“ä½œ PrivateGet æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ Pï¼ˆä¸€ä¸ªç§æœ‰åç§°ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ entry ä¸º PrivateElementFind(O, P)ã€‚
2. å¦‚æœ entry æ˜¯ EMPTYï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. å¦‚æœ entry.[[Kind]] æ˜¯ FIELD æˆ– METHODï¼Œåˆ™
   a. è¿”å› entry.[[Value]]ã€‚
4. æ–­è¨€ï¼šentry.[[Kind]] æ˜¯ ACCESSORã€‚
5. å¦‚æœ entry.[[Get]] æ˜¯ undefinedï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
6. ä»¤ getter ä¸º entry.[[Get]]ã€‚
7. è¿”å› ? Call(getter, O)ã€‚

#### 7.3.31 PrivateSet ( O, P, value )
æŠ½è±¡æ“ä½œ PrivateSet æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€Pï¼ˆä¸€ä¸ªç§æœ‰åç§°ï¼‰å’Œ valueï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ entry ä¸º PrivateElementFind(O, P)ã€‚
2. å¦‚æœ entry æ˜¯ EMPTYï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. å¦‚æœ entry.[[Kind]] æ˜¯ FIELDï¼Œåˆ™
   a. è®¾ç½® entry.[[Value]] ä¸º valueã€‚
4. å¦åˆ™å¦‚æœ entry.[[Kind]] æ˜¯ METHODï¼Œåˆ™
   a. æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
5. å¦åˆ™ï¼Œ
   a. æ–­è¨€ï¼šentry.[[Kind]] æ˜¯ ACCESSORã€‚
   b. å¦‚æœ entry.[[Set]] æ˜¯ undefinedï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
   c. ä»¤ setter ä¸º entry.[[Set]]ã€‚
   d. æ‰§è¡Œ ? Call(setter, O, Â« value Â»)ã€‚
6. è¿”å› UNUSEDã€‚

#### 7.3.32 DefineField ( receiver, fieldRecord )
æŠ½è±¡æ“ä½œ DefineField æ¥å—å‚æ•° receiverï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ fieldRecordï¼ˆä¸€ä¸ª ClassFieldDefinition è®°å½•ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ fieldName ä¸º fieldRecord.[[Name]]ã€‚
2. ä»¤ initializer ä¸º fieldRecord.[[Initializer]]ã€‚
3. å¦‚æœ initializer ä¸æ˜¯ EMPTYï¼Œåˆ™
   a. ä»¤ initValue ä¸º ? Call(initializer, receiver)ã€‚
4. å¦åˆ™ï¼Œ
   a. ä»¤ initValue ä¸º undefinedã€‚
5. å¦‚æœ fieldName æ˜¯ä¸€ä¸ªç§æœ‰åç§°ï¼Œåˆ™
   a. æ‰§è¡Œ ? PrivateFieldAdd(receiver, fieldName, initValue)ã€‚
6. å¦åˆ™ï¼Œ
   a. æ–­è¨€ï¼šfieldName æ˜¯ä¸€ä¸ªå±æ€§é”®ã€‚
   b. æ‰§è¡Œ ? CreateDataPropertyOrThrow(receiver, fieldName, initValue)ã€‚
7. è¿”å› UNUSEDã€‚

#### 7.3.33 InitializeInstanceElements ( O, constructor )
æŠ½è±¡æ“ä½œ InitializeInstanceElements æ¥å—å‚æ•° Oï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ constructorï¼ˆä¸€ä¸ª ECMAScript å‡½æ•°å¯¹è±¡ï¼‰å¹¶è¿”å›åŒ…å« UNUSED çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ methods ä¸º constructor.[[PrivateMethods]] çš„å€¼ã€‚
2. å¯¹äº methods çš„æ¯ä¸ª PrivateElement æ–¹æ³•ï¼Œæ‰§è¡Œ
   a. æ‰§è¡Œ ? PrivateMethodOrAccessorAdd(O, method)ã€‚
3. ä»¤ fields ä¸º constructor.[[Fields]] çš„å€¼ã€‚
4. å¯¹äº fields çš„æ¯ä¸ªå…ƒç´  fieldRecordï¼Œæ‰§è¡Œ
   a. æ‰§è¡Œ ? DefineField(O, fieldRecord)ã€‚
5. è¿”å› UNUSEDã€‚

#### 7.3.34 AddValueToKeyedGroup ( groups, key, value )
æŠ½è±¡æ“ä½œ AddValueToKeyedGroup æ¥å—å‚æ•° groupsï¼ˆä¸€ä¸ªåŒ…å«å­—æ®µ [[Key]]ï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ [[Elements]]ï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼åˆ—è¡¨ï¼‰çš„è®°å½•åˆ—è¡¨ï¼‰ã€keyï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ valueï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å¹¶è¿”å› UNUSEDã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¯¹äº groups çš„æ¯ä¸ªè®°å½• { [[Key]], [[Elements]] } gï¼Œæ‰§è¡Œ
   a. å¦‚æœ SameValue(g.[[Key]], key) ä¸º trueï¼Œåˆ™
      i. æ–­è¨€ï¼šæ°å¥½ä¸€ä¸ªå…ƒç´ ç¬¦åˆæ­¤æ¡ä»¶ã€‚
      ii. å°† value é™„åŠ åˆ° g.[[Elements]]ã€‚
      iii. è¿”å› UNUSEDã€‚
2. ä»¤ group ä¸ºè®°å½• { [[Key]]: key, [[Elements]]: Â« value Â» }ã€‚
3. å°† group é™„åŠ åˆ° groupsã€‚
4. è¿”å› UNUSEDã€‚

#### 7.3.35 GroupBy ( items, callbackfn, keyCoercion )
æŠ½è±¡æ“ä½œ GroupBy æ¥å—å‚æ•° itemsï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰ã€callbackfnï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ keyCoercionï¼ˆPROPERTY æˆ– COLLECTIONï¼‰å¹¶è¿”å›åŒ…å«å­—æ®µ [[Key]]ï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ [[Elements]]ï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼åˆ—è¡¨ï¼‰çš„è®°å½•åˆ—è¡¨çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ‰§è¡Œ ? RequireObjectCoercible(items)ã€‚
2. å¦‚æœ IsCallable(callbackfn) ä¸º falseï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. ä»¤ groups ä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
4. ä»¤ iteratorRecord ä¸º ? GetIterator(items, SYNC)ã€‚
5. ä»¤ k ä¸º 0ã€‚
6. é‡å¤ï¼Œ
   a. å¦‚æœ k â‰¥ 2**53 - 1ï¼Œåˆ™
      i. ä»¤ error ä¸º ThrowCompletion(ä¸€ä¸ªæ–°åˆ›å»ºçš„ TypeError å¯¹è±¡)ã€‚
      ii. è¿”å› ? IteratorClose(iteratorRecord, error)ã€‚
   b. ä»¤ next ä¸º ? IteratorStepValue(iteratorRecord)ã€‚
   c. å¦‚æœ next æ˜¯ DONEï¼Œåˆ™
      i. è¿”å› groupsã€‚
   d. ä»¤ value ä¸º nextã€‚
   e. ä»¤ key ä¸º Completion(Call(callbackfn, undefined, Â« value, ğ”½(k) Â»))ã€‚
   f. IfAbruptCloseIterator(key, iteratorRecord)ã€‚
   g. å¦‚æœ keyCoercion æ˜¯ PROPERTYï¼Œåˆ™
      i. è®¾ç½® key ä¸º Completion(ToPropertyKey(key))ã€‚
      ii. IfAbruptCloseIterator(key, iteratorRecord)ã€‚
   h. å¦åˆ™ï¼Œ
      i. æ–­è¨€ï¼škeyCoercion æ˜¯ COLLECTIONã€‚
      ii. è®¾ç½® key ä¸º CanonicalizeKeyedCollectionKey(key)ã€‚
   i. æ‰§è¡Œ AddValueToKeyedGroup(groups, key, value)ã€‚
   j. è®¾ç½® k ä¸º k + 1ã€‚
  
### 7.4 å¯¹è¿­ä»£å™¨å¯¹è±¡çš„æ“ä½œ

å‚è§é€šç”¨è¿­ä»£æ¥å£ (27.1)ã€‚

#### 7.4.1 è¿­ä»£å™¨è®°å½•
è¿­ä»£å™¨è®°å½•æ˜¯ä¸€ç§ç”¨äºå°è£…è¿­ä»£å™¨æˆ–å¼‚æ­¥è¿­ä»£å™¨åŠå…¶ next æ–¹æ³•çš„è®°å½•å€¼ã€‚

è¿­ä»£å™¨è®°å½•å…·æœ‰è¡¨ 15 ä¸­åˆ—å‡ºçš„å­—æ®µã€‚

è¡¨ 15: è¿­ä»£å™¨è®°å½•å­—æ®µ
| å­—æ®µåç§°     | å€¼                        | å«ä¹‰                                          |
| ------------ | ------------------------- | --------------------------------------------- |
| [[Iterator]] | ä¸€ä¸ªå¯¹è±¡                  | ä¸€ä¸ªç¬¦åˆè¿­ä»£å™¨æˆ–å¼‚æ­¥è¿­ä»£å™¨æ¥å£çš„å¯¹è±¡ã€‚        |
| [[NextMethod]] | ä¸€ä¸ª ECMAScript è¯­è¨€å€¼   | [[Iterator]] å¯¹è±¡çš„ next æ–¹æ³•ã€‚               |
| [[Done]]     | ä¸€ä¸ªå¸ƒå°”å€¼                | è¿­ä»£å™¨æ˜¯å¦å·²å®Œæˆæˆ–å·²å…³é—­ã€‚                    |

#### 7.4.2 GetIteratorFromMethod ( obj, method )
æŠ½è±¡æ“ä½œ GetIteratorFromMethod æ¥å—å‚æ•° objï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ methodï¼ˆä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼‰ï¼Œå¹¶è¿”å›åŒ…å«è¿­ä»£å™¨è®°å½•çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ iterator ä¸º ? Call(method, obj)ã€‚
2. å¦‚æœ iterator ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
3. ä»¤ nextMethod ä¸º ? Get(iterator, "next")ã€‚
4. ä»¤ iteratorRecord ä¸ºè¿­ä»£å™¨è®°å½• { [[Iterator]]: iterator, [[NextMethod]]: nextMethod, [[Done]]: false }ã€‚
5. è¿”å› iteratorRecordã€‚

#### 7.4.3 GetIterator ( obj, kind )
æŠ½è±¡æ“ä½œ GetIterator æ¥å—å‚æ•° objï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ kindï¼ˆSYNC æˆ– ASYNCï¼‰ï¼Œå¹¶è¿”å›åŒ…å«è¿­ä»£å™¨è®°å½•çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ kind æ˜¯ ASYNCï¼Œåˆ™
   a. ä»¤ method ä¸º ? GetMethod(obj, @@asyncIterator)ã€‚
   b. å¦‚æœ method æ˜¯ undefinedï¼Œåˆ™
      i. ä»¤ syncMethod ä¸º ? GetMethod(obj, @@iterator)ã€‚
      ii. å¦‚æœ syncMethod æ˜¯ undefinedï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
      iii. ä»¤ syncIteratorRecord ä¸º ? GetIteratorFromMethod(obj, syncMethod)ã€‚
      iv. è¿”å› CreateAsyncFromSyncIterator(syncIteratorRecord)ã€‚
2. å¦åˆ™ï¼Œ
   a. ä»¤ method ä¸º ? GetMethod(obj, @@iterator)ã€‚
3. å¦‚æœ method æ˜¯ undefinedï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
4. è¿”å› ? GetIteratorFromMethod(obj, method)ã€‚

#### 7.4.4 IteratorNext ( iteratorRecord [ , value ] )
æŠ½è±¡æ“ä½œ IteratorNext æ¥å—å‚æ•° iteratorRecordï¼ˆä¸€ä¸ªè¿­ä»£å™¨è®°å½•ï¼‰å’Œå¯é€‰å‚æ•° valueï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰ï¼Œå¹¶è¿”å›åŒ…å«å¯¹è±¡çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å¦‚æœ value ä¸å­˜åœ¨ï¼Œåˆ™
   a. ä»¤ result ä¸º Completion(Call(iteratorRecord.[[NextMethod]], iteratorRecord.[[Iterator]]))ã€‚
2. å¦åˆ™ï¼Œ
   a. ä»¤ result ä¸º Completion(Call(iteratorRecord.[[NextMethod]], iteratorRecord.[[Iterator]], Â« value Â»))ã€‚
3. å¦‚æœ result æ˜¯ä¸€ä¸ªæŠ›å‡ºå®Œæˆï¼Œåˆ™
   a. è®¾ç½® iteratorRecord.[[Done]] ä¸º trueã€‚
   b. è¿”å› ? resultã€‚
4. è®¾ç½® result ä¸º ! resultã€‚
5. å¦‚æœ result ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™
   a. è®¾ç½® iteratorRecord.[[Done]] ä¸º trueã€‚
   b. æŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
6. è¿”å› resultã€‚

#### 7.4.5 IteratorComplete ( iterResult )
æŠ½è±¡æ“ä½œ IteratorComplete æ¥å—å‚æ•° iterResultï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å¹¶è¿”å›åŒ…å«å¸ƒå°”å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. è¿”å› ToBoolean(? Get(iterResult, "done"))ã€‚

#### 7.4.6 IteratorValue ( iterResult )
æŠ½è±¡æ“ä½œ IteratorValue æ¥å—å‚æ•° iterResultï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. è¿”å› ? Get(iterResult, "value")ã€‚

#### 7.4.7 IteratorStep ( iteratorRecord )
æŠ½è±¡æ“ä½œ IteratorStep æ¥å—å‚æ•° iteratorRecordï¼ˆä¸€ä¸ªè¿­ä»£å™¨è®°å½•ï¼‰å¹¶è¿”å›åŒ…å«å¯¹è±¡æˆ– DONE çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒé€šè¿‡è°ƒç”¨ iteratorRecord.[[NextMethod]] è¯·æ±‚ iteratorRecord.[[Iterator]] çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å› DONE è¡¨ç¤ºè¿­ä»£å™¨å·²åˆ°è¾¾æœ«å°¾ï¼Œæˆ–è¿”å› IteratorResult å¯¹è±¡è¡¨ç¤ºæœ‰ä¸‹ä¸€ä¸ªå€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ result ä¸º ? IteratorNext(iteratorRecord)ã€‚
2. ä»¤ done ä¸º Completion(IteratorComplete(result))ã€‚
3. å¦‚æœ done æ˜¯ä¸€ä¸ªæŠ›å‡ºå®Œæˆï¼Œåˆ™
   a. è®¾ç½® iteratorRecord.[[Done]] ä¸º trueã€‚
   b. è¿”å› ? doneã€‚
4. è®¾ç½® done ä¸º ! doneã€‚
5. å¦‚æœ done ä¸º trueï¼Œåˆ™
   a. è®¾ç½® iteratorRecord.[[Done]] ä¸º trueã€‚
   b. è¿”å› DONEã€‚
6. è¿”å› resultã€‚

#### 7.4.8 IteratorStepValue ( iteratorRecord )
æŠ½è±¡æ“ä½œ IteratorStepValue æ¥å—å‚æ•° iteratorRecordï¼ˆä¸€ä¸ªè¿­ä»£å™¨è®°å½•ï¼‰å¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼æˆ– DONE çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚å®ƒé€šè¿‡è°ƒç”¨ iteratorRecord.[[NextMethod]] è¯·æ±‚ iteratorRecord.[[Iterator]] çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å› DONE è¡¨ç¤ºè¿­ä»£å™¨å·²åˆ°è¾¾æœ«å°¾ï¼Œæˆ–ä» IteratorResult å¯¹è±¡ä¸­è¿”å›ä¸‹ä¸€ä¸ªå€¼ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ result ä¸º ? IteratorStep(iteratorRecord)ã€‚
2. å¦‚æœ result æ˜¯ DONEï¼Œåˆ™
   a. è¿”å› DONEã€‚
3. ä»¤ value ä¸º Completion(IteratorValue(result))ã€‚
4. å¦‚æœ value æ˜¯ä¸€ä¸ªæŠ›å‡ºå®Œæˆï¼Œåˆ™
   a. è®¾ç½® iteratorRecord.[[Done]] ä¸º trueã€‚
5. è¿”å› ? valueã€‚

#### 7.4.9 IteratorClose ( iteratorRecord, completion )
æŠ½è±¡æ“ä½œ IteratorClose æ¥å—å‚æ•° iteratorRecordï¼ˆä¸€ä¸ªè¿­ä»£å™¨è®°å½•ï¼‰å’Œ completionï¼ˆä¸€ä¸ªå®Œæˆè®°å½•ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå®Œæˆè®°å½•ã€‚å®ƒç”¨äºé€šçŸ¥è¿­ä»£å™¨åº”æ‰§è¡Œä»»ä½•åœ¨è¾¾åˆ°å®ŒæˆçŠ¶æ€æ—¶é€šå¸¸æ‰§è¡Œçš„æ“ä½œã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ–­è¨€ï¼šiteratorRecord.[[Iterator]] æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚
2. ä»¤ iterator ä¸º iteratorRecord.[[Iterator]]ã€‚
3. ä»¤ innerResult ä¸º Completion(GetMethod(iterator, "return"))ã€‚
4. å¦‚æœ innerResult æ˜¯ä¸€ä¸ªæ­£å¸¸å®Œæˆï¼Œåˆ™
   a. ä»¤ return ä¸º innerResult.[[Value]]ã€‚
   b. å¦‚æœ return æ˜¯ undefinedï¼Œè¿”å› ? completionã€‚
   c. è®¾ç½® innerResult ä¸º Completion(Call(return, iterator))ã€‚
5. å¦‚æœ completion æ˜¯ä¸€ä¸ªæŠ›å‡ºå®Œæˆï¼Œè¿”å› ? completionã€‚
6. å¦‚æœ innerResult æ˜¯ä¸€ä¸ªæŠ›å‡ºå®Œæˆï¼Œè¿”å› ? innerResultã€‚
7. å¦‚æœ innerResult.[[Value]] ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
8. è¿”å› ? completionã€‚

#### 7.4.10 IfAbruptCloseIterator ( value, iteratorRecord )
IfAbruptCloseIterator æ˜¯ä¸€ä¸ªç®€å†™ï¼Œè¡¨ç¤ºä½¿ç”¨è¿­ä»£å™¨è®°å½•çš„ä¸€ç³»åˆ—ç®—æ³•æ­¥éª¤ã€‚å½¢å¼ä¸º IfAbruptCloseIterator(value, iteratorRecord) çš„ç®—æ³•æ­¥éª¤æ„å‘³ç€ï¼š

1. æ–­è¨€ï¼švalue æ˜¯ä¸€ä¸ªå®Œæˆè®°å½•ã€‚
2. å¦‚æœ value æ˜¯ä¸€ä¸ªçªç„¶å®Œæˆï¼Œåˆ™è¿”å› ? IteratorClose(iteratorRecord, value)ã€‚
3. å¦åˆ™ï¼Œè®¾ç½® value ä¸º ! valueã€‚

#### 7.4.11 AsyncIteratorClose ( iteratorRecord, completion )
æŠ½è±¡æ“ä½œ AsyncIteratorClose æ¥å—å‚æ•° iteratorRecordï¼ˆä¸€ä¸ªè¿­ä»£å™¨è®°å½•ï¼‰å’Œ completionï¼ˆä¸€ä¸ªå®Œæˆè®°å½•ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå®Œæˆè®°å½•ã€‚å®ƒç”¨äºé€šçŸ¥å¼‚æ­¥è¿­ä»£å™¨åº”æ‰§è¡Œä»»ä½•åœ¨è¾¾åˆ°å®ŒæˆçŠ¶æ€æ—¶é€šå¸¸æ‰§è¡Œçš„æ“ä½œã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ–­è¨€ï¼šiteratorRecord.[[Iterator]] æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚
2. ä»¤ iterator ä¸º iteratorRecord.[[Iterator]]ã€‚
3. ä»¤ innerResult ä¸º Completion(GetMethod(iterator, "return"))ã€‚
4. å¦‚æœ innerResult æ˜¯ä¸€ä¸ªæ­£å¸¸å®Œæˆï¼Œåˆ™
   a. ä»¤ return ä¸º innerResult.[[Value]]ã€‚
   b. å¦‚æœ return æ˜¯ undefinedï¼Œè¿”å› ? completionã€‚
   c. è®¾ç½® innerResult ä¸º Completion(Call(return, iterator))ã€‚
   d. å¦‚æœ innerResult æ˜¯ä¸€ä¸ªæ­£å¸¸å®Œæˆï¼Œåˆ™è®¾ç½® innerResult ä¸º Completion(Await(innerResult.[[Value]]))ã€‚
5. å¦‚æœ completion æ˜¯ä¸€ä¸ªæŠ›å‡ºå®Œæˆï¼Œè¿”å› ? completionã€‚
6. å¦‚æœ innerResult æ˜¯ä¸€ä¸ªæŠ›å‡ºå®Œæˆï¼Œè¿”å› ? innerResultã€‚
7. å¦‚æœ innerResult.[[Value]] ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚
8. è¿”å› ? completionã€‚

#### 7.4.12 CreateIterResultObject ( value, done )
æŠ½è±¡æ“ä½œ CreateIterResultObject æ¥å—å‚æ•° valueï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼ï¼‰å’Œ doneï¼ˆä¸€ä¸ªå¸ƒå°”å€¼ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªç¬¦åˆ IteratorResult æ¥å£çš„å¯¹è±¡ã€‚å®ƒåˆ›å»ºä¸€ä¸ªç¬¦åˆ IteratorResult æ¥å£çš„å¯¹è±¡ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ obj ä¸º OrdinaryObjectCreate(%Object.prototype%)ã€‚
2. æ‰§è¡Œ ! CreateDataPropertyOrThrow(obj, "value", value)ã€‚
3. æ‰§è¡Œ ! CreateDataPropertyOrThrow(obj, "done", done)ã€‚
4. è¿”å› objã€‚

### 7.4 å¯¹è¿­ä»£å™¨å¯¹è±¡çš„æ“ä½œ (ç»§ç»­)

#### 7.4.13 CreateListIteratorRecord ( list )
æŠ½è±¡æ“ä½œ CreateListIteratorRecord æ¥å—å‚æ•° listï¼ˆä¸€ä¸ª ECMAScript è¯­è¨€å€¼çš„åˆ—è¡¨ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨è®°å½•ã€‚å®ƒåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡è®°å½•ï¼Œè¯¥è®°å½•çš„ next æ–¹æ³•è¿”å› list çš„åç»­å…ƒç´ ã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ closure ä¸ºä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„æ–°æŠ½è±¡é—­åŒ…ï¼Œå®ƒæ•è· list å¹¶åœ¨è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
   a. å¯¹äº list çš„æ¯ä¸ªå…ƒç´  Eï¼Œæ‰§è¡Œ
      i. æ‰§è¡Œ ? GeneratorYield(CreateIterResultObject(E, false))ã€‚
   b. è¿”å› NormalCompletion(undefined)ã€‚
2. ä»¤ iterator ä¸º CreateIteratorFromClosure(closure, EMPTY, %IteratorPrototype%)ã€‚
3. è¿”å›è¿­ä»£å™¨è®°å½• { [[Iterator]]: iterator, [[NextMethod]]: %GeneratorFunction.prototype.prototype.next%, [[Done]]: false }ã€‚
   
æ³¨æ„ï¼š
list è¿­ä»£å™¨å¯¹è±¡å¯¹ ECMAScript ä»£ç æ˜¯ä¸å¯ç›´æ¥è®¿é—®çš„ã€‚

#### 7.4.14 IteratorToList ( iteratorRecord )
æŠ½è±¡æ“ä½œ IteratorToList æ¥å—å‚æ•° iteratorRecordï¼ˆä¸€ä¸ªè¿­ä»£å™¨è®°å½•ï¼‰ï¼Œå¹¶è¿”å›åŒ…å« ECMAScript è¯­è¨€å€¼åˆ—è¡¨çš„æ­£å¸¸å®Œæˆæˆ–æŠ›å‡ºå®Œæˆã€‚è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»¤ values ä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
2. é‡å¤ï¼Œ
   a. ä»¤ next ä¸º ? IteratorStepValue(iteratorRecord)ã€‚
   b. å¦‚æœ next æ˜¯ DONEï¼Œåˆ™
      i. è¿”å› valuesã€‚
   c. å°† next æ·»åŠ åˆ° valuesã€‚
